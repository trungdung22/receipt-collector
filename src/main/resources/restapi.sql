CREATE TABLE IF NOT EXISTS users (
     id         INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
     first_name TEXT,
     last_name  TEXT,
     username  TEXT,
     password TEXT,
     email TEXT,
     phone TEXT,
     created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
     updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
     UNIQUE (username, email)
);

CREATE TABLE IF NOT EXISTS receipts (
     id   INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
     user_id INT NOT NULL REFERENCES users (id),
     title TEXT,
     description TEXT,
     created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
     updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
     created_by INT DEFAULT NULL,
     updated_by INT DEFAULT NULL
);

CREATE TABLE IF NOT EXISTS medias (
    id   INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    file_name TEXT NOT NULL,
    key_name TEXT NOT NULL,
    receipt_id INT NOT NULL REFERENCES receipts (id),
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    created_by INT DEFAULT NULL,
    updated_by INT DEFAULT NULL
);